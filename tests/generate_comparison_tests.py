# Copyright 2017 von Karman Institute for Fluid Dynamics (VKI)
#
# This file is part of MUlticomponent Thermodynamic And Transport
# properties for IONized gases in C++ (Mutation++) software package.
#
# Mutation++ is free software: you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as
# published by the Free Software Foundation, either version 3 of the
# License, or (at your option) any later version.
#
# Mutation++ is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with Mutation++.  If not, see
# <http://www.gnu.org/licenses/>.

#
# This script generates Catch TEST_CASEs prior to building the testing target.
#

from os import listdir
from os.path import isfile, join

# Get a list of files in the comparisons directory
cases = [f for f in listdir("comparisons") if isfile(join("comparisons", f))]

with open("comparison_tests.cpp", "w") as f:
    # Write the header info
    f.write('// This file is automatically generated during compilation.\n')
    f.write('// Do not modify.\n')
    f.write('#include "run_comparison.h"\n\n')

    for case in cases:
        f.write('TEST_CASE("Comparison: ' + case + '", "[comparison]") {\n')
        f.write('    run_comparison("' + case + '");\n')
        f.write('}\n\n')
